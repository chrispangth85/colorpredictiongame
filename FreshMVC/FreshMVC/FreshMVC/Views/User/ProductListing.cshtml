<!DOCTYPE html>
@using resSharedPB = FreshMVC.Resources.PackBuddyShared;
@using FreshMVC.Models
@model ProductListModel
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage - Reliance</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
            integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
          integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    
</head>

<body>
    @Html.Partial("HeaderMenu")
    <main>
        <!-- Search Bar -->
        <section class="section-wrap">
            <section class="bg-peach">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-8 mx-auto">
                            <div class="section-inner-wrapper padding-s" style="overflow: visible;">
                                <form class="width-100 center" action="">
                                    <div class="input-custom max-width-800">
                                        <input class="width-100 " type="text" name="search" id="search"
                                               placeholder="Search">
                                        <button class="search-button" type="submit">
                                            <i class="bi bi-search text-grey search-icon"></i>
                                        </button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <section class="px-lg-3 ">
                <div class="section-inner-wrapper p-0">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="py-4">
                                    <div class="display-space mrgn-btm-s px-2">
                                        <h1 class="main-heading-2">All Products</h1>
                                    </div>
                                    <div class="grid-mall width-100">
                                        @foreach (var product in Model.ProductList)
                                        {
                                            <div class="mall-product border-12 border-grey overflow-hide daily mb-lg-3 mb-2  ">
                                                <div class="mall-product-img-p border-bottom">
                                                    <!--If Possible image neeed to be square size all the time-->
                                                    <div class="product-card-img ">
                                                        <a href="./ProductDescription?ID=@product.id" class="carousel__slide">
                                                            <figure>
                                                                <div>
                                                                    <img src="~/HotMall/@product.ImagePath" alt="">
                                                                </div>
                                                            </figure>
                                                        </a>
                                                    </div>
                                                    @switch (@product.Other)
                                                    {
                                                        case "SOLD":
                                                            <div class="promo-top label-sold">Sold</div>
                                                            <div class="out-of-stock middle center">
                                                                <div class="no-stock-text">OUT OF STOCK</div>
                                                            </div>
                                                            <svg class="out-of-stock-line mall-line line-top-left" width="50"
                                                                 height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M 0 0 L 50 50" fill="#FBF5EC" stroke="lightgrey"
                                                                      stroke-width="2"></path>
                                                            </svg>
                                                            <svg class="out-of-stock-line mall-line line-top-right" width="50"
                                                                 height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M 0 50 L 50 0" fill="#FBF5EC" stroke="lightgrey"
                                                                      stroke-width="2"></path>
                                                            </svg>
                                                            <svg class="out-of-stock-line mall-line line-bottom-left" width="50"
                                                                 height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M 0 50 L 50 0" fill="#FBF5EC" stroke="lightgrey"
                                                                      stroke-width="2"></path>
                                                            </svg>
                                                            <svg class="out-of-stock-line mall-line line-bottom-right" width="50"
                                                                 height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M 0 0 L 50 50" fill="#FBF5EC" stroke="lightgrey"
                                                                      stroke-width="2"></path>
                                                            </svg>
                                                            break;
                                                        case "DEAL":
                                                            <div class="promo-top label-deal">Deal</div>
                                                            break;
                                                        case "NEW":
                                                            <div class="promo-top label-new">NEW</div>
                                                            break;
                                                    }
                                                </div>
                                                <div class="product-card-padding">
                                                    <div class="name mall-product-name">
                                                        <a href="./ProductDescription?ID=@product.id"
                                                           class="mb-0 pb-0">
                                                            @product.Title
                                                        </a>
                                                    </div>
                                                    <div class="mall-product-excerpt mrgn-btm-xs text-grey">
                                                        @product.Title
                                                    </div>
                                                    <div class="display-flex mt-4">
                                                        <div class="width-100">
                                                            <div class="mall-product-price mb-1">
                                                                <span class="currency">₹</span><span class="price">@product.Price</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="date display-none">13/08/2022</div>
                                                </div>
                                            </div>
                                        }
                                        <div class="gutter-sizer"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </main>



    @Html.Partial("FooterMenu")

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="~/HotMall/isotope/isotope.pkgd.min.js"></script>
    <script src="~/HotMall/isotope/packery-mode.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5.0.0/imagesloaded.pkgd.min.js"></script>
    <script src="~/HotMall/main.js" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            var $grid = $('.grid-mall').isotope({
                layoutMode: 'packery',
                itemSelector: '.mall-product',
                imagesLoaded: true,
                packery: {
                    gutter: '.gutter-sizer',
                    columnWidth: '.mall-product'
                },
                percentPosition: true,
                getSortData: {
                    nameasc: '.name',
                    namedesc: '.name',
                    pricelow: '.price parseInt',
                    pricehigh: '.price parseInt',
                    /*old: function ($elem) {
                        var dateStr = $elem.find('.date').text(),
                            dateArray = dateStr.split('-'),
                            year = dateArray[2],
                            month = dateArray[0],
                            day = dateArray[1];
                        return new Date(year, month, day);
                    }*/
                    old: function (mallInnerElem) {
                        const dateElem = mallInnerElem.querySelector('.date')
                        // Convert date to MM/DD/YYYY so it can be properly parsed
                        const [day, month, year] = dateElem.textContent.split('/')
                        return Date.parse(`${month}/${day}/${year}`)
                    }
                },
                sortAscending: {
                    nameasc: true,
                    namedesc: false,
                    pricelow: true,
                    pricehigh: false,
                    old: false
                }
            });
            // bind sort button click
            $('.sort-by-mall-group').on('click', 'div', function () {
                var sortValue = $(this).attr('data-sort-mall');
                $grid.isotope({ sortBy: sortValue });
            });
            // bind filter button click
            $('.filter-by-mall-group').on('click', 'div.mall-filter', function () {
                var filterValue = $(this).attr('data-filter-mall');
                $grid.isotope({ filter: filterValue });
            });
            // change is-checked class on buttons
            $('.mall-group').each(function (i, buttonGroup) {
                var $buttonGroup = $(buttonGroup);
                $buttonGroup.on('click', 'div', function () {
                    $buttonGroup.find('.is-checked').removeClass('is-checked');
                    $(this).addClass('is-checked');
                });
            });
            // Refresh grid everytime image get loaded
            /*$grid.imagesLoaded().progress( function() {
                $grid.isotope('layout');
            });
            */

        });
    </script>
</body>

</html>